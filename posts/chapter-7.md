---
title: '커플링과 커네이선스'
subtitle: '두 컴포넌트 중 한쪽이 변경될 경우 다른 쪽도 변경해야 전체 시스템의 정합성이 맞는다면 이들은 커네이선스를 갖고 있는 것이다.'
date: '2022-01-03'
---

아키텍트는 운영 아키텍처 특성을 따져보고 아키텍처 특성에 영향을 미치는 코드베이스 외부의 컴포넌트를 잘 살펴야 한다. -> `아키텍처 퀀텀`이라는 용어가 정의됨

아키텍처 퀀텀의 의미를 이해하기 위해서는 먼저 `커네이선스`라는 핵심 메트릭을 이해해야함

## 7.1 커플링과 커네이선스

### 커네이선스
두 컴포넌트 중 한쪽이 변경될 경우 다른 쪽도 변경해야 전체 시스템의 정합성이 맞는다면 이들은 커네이선스를 갖고 있는 것이다.

그리고 커네이선스를 
- 정적 커네이선스
- 동적 커네이선스
로 분류한다.

아키텍처 퀀텀을 정의하려면 컴포넌트가 어떻게 서로 연결되어(wired)있는지 측정할 방법이 필요하다.

#### 정적 커네이선스
- 정적 코드 분석으로 발견할 수 있음

#### 동적 커네이선스
- 런타임 동작에 관련
- 동기, 비동기 두 종류
	- 동기: 분산 서비스끼리 호출 시 호출부(caller)는 피호출부(callee)의 응답을 기다려야한다.
	- 비동기: 파이어 앤드 포겟(fire-and-forget) 방식이므로 운영 아키텍처에서 두 서비스는 개별적으로 작동할 수 있다.

## 7.2 아키텍처 퀀텀과 세분도
소프트웨어를 서로 엮는 것은 컴포넌트 레벨의 커플링만이 아니다. 많은 비즈니스 개념이 의미상 여러 시스템 파트를 한데 엮어 기능적으로 응집되어(functional cohesion)있다. 
그리고 개발자는 문제가 될 만한 커플링 지점을 모두 살펴야 한다.

### 아키텍처 퀀텀
> `높은 기능 응집도(high functional cohesion)`와 `동기적 커네이선스(synchronous connascence)`를 가진, `독립적으로 배포 가능한(independently deployable) 아티팩트`

### 독립적으로 배포 가능
- 아키텍처 퀀텀은 아키텍처의 다른 파트와 독립적으로 작동되는 모든 필수 컴포넌트를 포함한다.

### 높은 기능 응집도
- 응집도는 컴포넌트 설계에 따라 구현된 코드가 얼마나 목적에 맞게 통합되어 있는지를 나타낸다.
- 기능 응집도가 높다는 것은 아키텍처 퀀텀이 목적에 맞는 뭔가를 하고 있다는 뜻

### 동기적 커네이선스
- 동기적 커네이선스는 아키텍처 퀀텀을 형성하는 애플리케이션 콘텍스트 내부 또는 분산 서비스 간의 동기 호출을 의미

> `도메인 주도 설계의 경계 콘텍스트`
> 각 엔티티는 로컬 콘텍스트 내부에서 가장 잘 동작하므로 조직 전체가 함께 쓰는 통합 Customer 클래스를 만드는 대신, 각 문제 도메인에 자체 클래스를 두고 차이점은 그것을 통합하는 지점에서 조정하는 것이 경계 콘텍스트의 개념이다.


아키텍처 퀀텀 개념은 아키텍처 특성의 새로운 범위를 제시한다.
중요한 운영 관심사에 대해 범위를 좁혀보면 중요한 아키텍처 문제를 조기에 발견하여 하이브리드 아키텍처를 설계할 수도 있다.